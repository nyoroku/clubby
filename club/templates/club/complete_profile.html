{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Complete Profile</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
</head>
<body>
    <section class="section">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8-tablet is-6-desktop">
                    <div class="box">
                        <h1 class="title">Complete Your Profile</h1>
                        <p class="subtitle">We need a few details</p>

                        {% if messages %}
                            {% for message in messages %}
                            <div class="notification is-{{ message.tags }}">
                                <button class="delete"></button>
                                {{ message }}
                            </div>
                            {% endfor %}
                        {% endif %}

                        <form method="post">
                            {% csrf_token %}

                            <div class="columns">
                                <div class="column">
                                    <div class="field">
                                        <label class="label">First Name *</label>
                                        <div class="control">
                                            <input class="input" type="text" name="first_name"
                                                   placeholder="John" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="column">
                                    <div class="field">
                                        <label class="label">Second Name *</label>
                                        <div class="control">
                                            <input class="input" type="text" name="second_name"
                                                   placeholder="Doe" required>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">County *</label>
                                <div class="control">
                                    <div class="select is-fullwidth">
                                        <select name="county" required>
                                            <option value="">Select your county...</option>
                                            <option value="mombasa">Mombasa</option>
                                            <option value="kwale">Kwale</option>
                                            <option value="kilifi">Kilifi</option>
                                            <option value="tana_river">Tana River</option>
                                            <option value="lamu">Lamu</option>
                                            <option value="taita_taveta">Taita Taveta</option>
                                            <option value="garissa">Garissa</option>
                                            <option value="wajir">Wajir</option>
                                            <option value="mandera">Mandera</option>
                                            <option value="marsabit">Marsabit</option>
                                            <option value="isiolo">Isiolo</option>
                                            <option value="meru">Meru</option>
                                            <option value="tharaka_nithi">Tharaka Nithi</option>
                                            <option value="embu">Embu</option>
                                            <option value="kitui">Kitui</option>
                                            <option value="machakos">Machakos</option>
                                            <option value="makueni">Makueni</option>
                                            <option value="nyandarua">Nyandarua</option>
                                            <option value="nyeri">Nyeri</option>
                                            <option value="kirinyaga">Kirinyaga</option>
                                            <option value="muranga">Murang'a</option>
                                            <option value="kiambu">Kiambu</option>
                                            <option value="turkana">Turkana</option>
                                            <option value="west_pokot">West Pokot</option>
                                            <option value="samburu">Samburu</option>
                                            <option value="trans_nzoia">Trans Nzoia</option>
                                            <option value="uasin_gishu">Uasin Gishu</option>
                                            <option value="elgeyo_marakwet">Elgeyo Marakwet</option>
                                            <option value="nandi">Nandi</option>
                                            <option value="baringo">Baringo</option>
                                            <option value="laikipia">Laikipia</option>
                                            <option value="nakuru">Nakuru</option>
                                            <option value="narok">Narok</option>
                                            <option value="kajiado">Kajiado</option>
                                            <option value="kericho">Kericho</option>
                                            <option value="bomet">Bomet</option>
                                            <option value="kakamega">Kakamega</option>
                                            <option value="vihiga">Vihiga</option>
                                            <option value="bungoma">Bungoma</option>
                                            <option value="busia">Busia</option>
                                            <option value="siaya">Siaya</option>
                                            <option value="kisumu">Kisumu</option>
                                            <option value="homa_bay">Homa Bay</option>
                                            <option value="migori">Migori</option>
                                            <option value="kisii">Kisii</option>
                                            <option value="nyamira">Nyamira</option>
                                            <option value="nairobi">Nairobi</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">Buyer Type *</label>
                                <div class="control">
                                    <div class="select is-fullwidth">
                                        <select name="buyer_type" required>
                                            <option value="">Select...</option>
                                            <option value="home">Home Use</option>
                                            <option value="business">Business Use</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="field">
                                <label class="label">Referral Code (Optional)</label>
                                <div class="control">
                                    <input class="input" type="text" name="referral_code"
                                           placeholder="Enter friend's referral code"
                                           value="{{ prefilled_referral_code }}"
                                           maxlength="6" style="text-transform: uppercase;">
                                </div>
                                <p class="help">Have a referral code from a friend? Enter it to earn bonus points!</p>
                            </div>

                            <div class="field">
                                <div class="control">
                                    <button type="submit" class="button is-primary is-fullwidth is-medium">
                                        <strong>Complete Registration</strong>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script>
        document.querySelectorAll('.notification .delete').forEach(btn => {
            btn.addEventListener('click', () => btn.parentElement.remove());
        });

        // Auto-uppercase referral code
        const referralInput = document.querySelector('input[name="referral_code"]');
        if (referralInput) {
            referralInput.addEventListener('input', function(e) {
                this.value = this.value.toUpperCase();
            });
        }
    </script>
</body>
</html>




